<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>3.67.0.txt</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>3.67.0.txt
</h1>
<div class='paths'>
doc/release_notes/3.67.0.txt
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-New+Feature">New Feature<span><a href="#label-New+Feature">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>A custom_block_results plugin has been added for custom handling of block results.  This allows routing blocks to return arbitrary objects instead of just String, nil, and false, and to have custom handling for them. For example, if you want to be able to have your routing blocks return the status code to use, you could do:</p>

<pre class="ruby"><span class="ruby-identifier">plugin</span> <span class="ruby-value">:custom_block_results</span>

<span class="ruby-identifier">handle_block_result</span> <span class="ruby-constant">Integer</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">response</span>.<span class="ruby-identifier">status_code</span> = <span class="ruby-identifier">result</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">route</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-value">200</span>
<span class="ruby-keyword">end</span>
</pre>

<p>While the expected use of the handle_block_result method is with class arguments, you can use any argument that implements an appropriate === method.</p>

<p>The symbol_views and json plugins, which support additional block results, now use the custom_block_results plugin internally.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
