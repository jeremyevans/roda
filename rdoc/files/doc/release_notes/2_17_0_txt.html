<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>2.17.0.txt</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>2.17.0.txt
</h1>
<div class='paths'>
doc/release_notes/2.17.0.txt
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-New+Plugins+">New Plugins <span><a href="#label-New+Plugins+">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>A run_append_slash plugin has been added, which automatically uses “/” as the path instead of an empty path when calling rack applications with r.run:</p>

<pre class="ruby"><span class="ruby-identifier">route</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">on</span> <span class="ruby-string">&quot;a&quot;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">run</span> <span class="ruby-constant">App</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># without run_append_slash:</span>
<span class="ruby-comment"># GET /a =&gt; App gets &quot;&quot; as PATH_INFO</span>
<span class="ruby-comment"># GET /a/ =&gt; App gets &quot;/&quot; as PATH_INFO</span>

<span class="ruby-comment"># with run_append_slash:</span>
<span class="ruby-comment"># GET /a =&gt; App gets &quot;/&quot; as PATH_INFO</span>
<span class="ruby-comment"># GET /a/ =&gt; App gets &quot;/&quot; as PATH_INFO</span>
</pre>

<p>By default, the path is modified directly, but if you want to redirect instead, you can pass a :use_redirects option when loading the plugin.</p>
</li></ul>

<h1 id="label-New+Features">New Features<span><a href="#label-New+Features">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>The assets plugin now supports an :sri option to enable subresource integrity on the link/script tags generated by the assets helper. This option takes either :sha256, :sha384, or :sha512 values, specifying the hash algorithm to use.  <a href="../../../classes/Roda.html"><code>Roda</code></a> 3 will default to using :sri =&gt; :sha256.</p>
</li><li>
<p>The assets plugin now supports a :postprocessor option, which should be a callable object.  If the option is given, it will be called with the filename, type, and rendered asset output of the file (CSS/JS), and should return the postprocessed content to use.  This allows any type of custom postprocessing to be done, such as CSS autoprefixing.</p>
</li><li>
<p>The render plugin now supports a :layout_opts=&gt;:merge_locals option, which will automatically merge view template locals into layout template locals.  This is useful if you want to use the same local variable for both templates.</p>
</li><li>
<p>The error_handler plugin now supports a :classes option, allowing you to override which exception classes to handle.  This allows it to be used with libraries which use exception classes that subclass from Exception instead of StandardError.</p>
</li></ul>

<h1 id="label-Other+Improvements">Other Improvements<span><a href="#label-Other+Improvements">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>The type_routing plugin now works correctly when using r.run. Previously, if the type routing plugin recognized and removed the file extension used in the requested path, it would not add the file extension back to the path when passing the request to another rack app.</p>
</li></ul>

<h1 id="label-Backwards+Compatibility">Backwards Compatibility<span><a href="#label-Backwards+Compatibility">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>In the assets plugin, Roda::RodaRequest.assets_matchers now uses symbols instead of strings as the first argument in each entry. This should not affect you unless you were accessing the values directly.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
