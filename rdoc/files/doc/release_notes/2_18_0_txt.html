<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>2.18.0.txt</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>2.18.0.txt
</h1>
<div class='paths'>
doc/release_notes/2.18.0.txt
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-New+Plugins+">New Plugins <span><a href="#label-New+Plugins+">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>A static_routing plugin has been added, which can give a 3-4x increase in performance for large number of static routes, and makes routing O(1) for static routes.  Static routes are routes that match full paths, with no placeholders, and are checked before using the normal routing tree.</p>

<p>Static routes are defined via class-level static_* routing methods. There is a static_* routing method for each HTTP verb (e.g. static_get), as well as a static_route method, which will work for any HTTP verb, with the verb-specific method taking priority. By using static_route, you can get significantly faster performance while retaining some of the benefits of Rodaâ€™s routing tree design (simple shared logic with verb specific behavior). Example:</p>

<pre class="ruby"><span class="ruby-identifier">plugin</span> <span class="ruby-value">:static_routing</span>

<span class="ruby-identifier">static_route</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-ivar">@var</span> = <span class="ruby-value">:foo</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">get</span> <span class="ruby-keyword">do</span>
    <span class="ruby-string">&#39;Not actually reached&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">post</span>{<span class="ruby-string">&#39;static POST /#{@var}&#39;</span>}
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">static_get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-string">&#39;static GET /foo&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">route</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-string">&#39;Not a static route&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Because static routing routes on the full path instead of by path segment, the methods takes the full path as a string, including the leading slash.</p>
</li><li>
<p>An assets_preloading plugin has been added, which makes it simple to generate HTML link tags or a Link header value to tell the browser to preload assets for performance reasons.</p>

<pre># In routes, using the Link header:
response.headers[&#39;Link&#39;] = preload_assets_link_header(:css)

# In templates, using a link tag:
&lt;%= preload_assets_link_tags(:css) %&gt;</pre>
</li></ul>

<h1 id="label-New+Features">New Features<span><a href="#label-New+Features">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>RodaRequest#real_remaining_path has been added.  This is designed to be overridden by plugins that modify remaining_path for internal routing purposes.  RodaRequest#run now uses real_remaining_path when passing requests to other rack applications.</p>
</li><li>
<p>An assets_paths method has been added to the assets plugin.  This is similar to the assets method, but it returns an array of paths to the assets, instead of a HTML link/script tag.</p>
</li></ul>

<h1 id="label-Other+Improvements">Other Improvements<span><a href="#label-Other+Improvements">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>The public plugin now works correctly when used with the type_routing plugin, for paths ending in extensions that type_routing is configured to handle.</p>
</li><li>
<p>The head plugin now works with the not_allowed plugin if it is loaded after the not_allowed plugin.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
